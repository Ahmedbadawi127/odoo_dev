<?xml version="1.0" encoding="UTF-8" ?>
<odoo>


    <record id="cases_form_view" model="ir.ui.view">
        <field name="name">lab.cases.form</field>
        <field name="model">lab.cases</field>
        <field name="arch" type="xml">
            <form string="Cases">
                <header>
                    <button name="calc_price_material" type="object" string="Test"/>

                    <button name="action_registered" type="object" string="Registered" class="oe_highlight" states="registration"/>

                    <button name="action_confirm_bropha" type="object" string="Confirm Bropha" class="oe_highlight" states="bropha"/>

                    <button name="action_manufactured" type="object" string="Manufactured" class="oe_highlight" states="manufacturing"/>

                    <button name="action_completed" type="object" string="Delivered" class="oe_highlight"  states="delivering"/>

                    <field name="state" widget="statusbar" statusbar_visible="registration,bropha,manufacturing,delivering,completed"/>


                </header>
                <sheet>
                    <group col="4" colspan="8">
                        <field name="patient"/>
                        <field name="shade"/>
                        <field name="entry_date"/>
                        <field name="days_processing" invisible="1"/>
                        <field name="delivery_date" invesible="1"/>
                        <field name="doctor"/>
                        <field name="price"  widget="monetary" sum="Total Price"/>
                        <field name="discount"/>
                        <field name="billed_price" readonly="1" widget="monetary" sum="Total Billed"/>
                        <field name="estimated_cost"/>
                        <field name="estimated_profit" readonly="1"/>
                        <field name="userid"/>
                    </group>
                    <notebook>
                         <page string="Diagnosis">
                                <field name="diagnosis_ids">
                                    <tree editable="bottom">
                                        <field name="type"/>
<!--                                        <field name="case_id" invisible="1"/>-->
                                        <field name="side"/>
                                        <field name="t_1"/>

                                        <field name="t_2"/>
                                        <field name="t_3"/>
                                        <field name="t_4"/>
                                        <field name="t_5"/>
                                        <field name="t_6"/>
                                        <field name="t_7"/>
                                        <field name="t_8"/>
                                        <field name="subtotal_t_p"  widget="monetary" sum="Total Price"/>

                                    </tree>
                                </field>
                         </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="cases_tree_view" model="ir.ui.view">
        <field name="name">lab.cases.tree</field>
        <field name="model">lab.cases</field>
        <field name="arch" type="xml">
                <tree string="Cases">
                    <field name="seq_case_no" readonly="1"/>
                    <field name="patient"/>
                    <field name="shade"/>
                    <field name="entry_date"/>
                    <field name="delivery_date"/>
                    <field name="doctor"/>
                    <field name="state"/>
                    <field name="price"/>
                    <field name="discount"/>
                    <field name="billed_price" readonly="1"/>
                    <field name="estimated_cost"/>
                    <field name="estimated_profit" readonly="1"/>
                    <field name="userid"/>

                </tree>
            </field>
        </record>

<!--     <record id="lab_cases_search_view" model="ir.ui.view">-->
<!--       <field name="name">lab.cases.search</field>-->
<!--       <field name="model">lab.cases</field>-->
<!--        <field name="arch" type="xml">-->
<!--            <search string="cases">-->
<!--                <filter name="group_doctor" string="Doctors" icon="terp-partner" context="{'group_by':'doctor'}"/>-->
<!--            </search>-->
<!--       </field>-->
<!--    </record>-->

    <record id="action_operations_cases" model="ir.actions.act_window">
        <field name="name">Cases</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">lab.cases</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="cases_tree_view"/>

    </record>



    <record model="ir.actions.server" id="lab_cases_Set_State_Bropha_action_server">
        <field name="name">Set Status On Bropha</field>
        <field name="model_id" ref="lab.model_lab_cases"/>
        <field name="binding_model_id" ref="lab.model_lab_cases"/>
        <field name="state">code</field>
        <field name="code">action = records.Set_State_Bropha()</field>
    </record>


    <record model="ir.actions.server" id="lab_cases_Set_State_manufacturing_action_server">
        <field name="name">Set Status On Manufacturing</field>
        <field name="model_id" ref="lab.model_lab_cases"/>
        <field name="binding_model_id" ref="lab.model_lab_cases"/>
        <field name="state">code</field>
        <field name="code">action = records.Set_State_Manufacturing()</field>
    </record>


    <record model="ir.actions.server" id="lab_cases_Set_State_delivering_action_server">
        <field name="name">Set Status Manufactured And On Delivering</field>
        <field name="model_id" ref="lab.model_lab_cases"/>
        <field name="binding_model_id" ref="lab.model_lab_cases"/>
        <field name="state">code</field>
        <field name="code">action = records.Set_State_Delivering()</field>
    </record>


    <record model="ir.actions.server" id="lab_cases_Set_State_completed_action_server">
        <field name="name">Set Status Completed</field>
        <field name="model_id" ref="lab.model_lab_cases"/>
        <field name="binding_model_id" ref="lab.model_lab_cases"/>
        <field name="state">code</field>
        <field name="code">action = records.Set_State_Completed()</field>
    </record>

</odoo>